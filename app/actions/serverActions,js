'use server';

export async function handleCheckout(formData) {
  const { name, address, phone, email } = formData;

  // Basic validation
  if (!name || !address || !phone || !email) {
    return { success: false, message: 'All fields are required.' };
  }

  const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
  const phoneRegex = /^[0-9]{10}$/;

  if (!emailRegex.test(email)) {
    return { success: false, message: 'Invalid email format.' };
  }

  if (!phoneRegex.test(phone)) {
    return { success: false, message: 'Invalid phone number format.' };
  }

  // Clear user cart logic here
  // Assuming you have a function clearUserCart() that clears the cart
  try {
    await clearUserCart();
    return { success: true, message: 'Checkout successful and cart cleared.' };
  } catch (error) {
    return { success: false, message: 'Error clearing cart.' };
  }
}

// Mock function to clear user cart
async function clearUserCart() {
  // Implement your cart clearing logic here
  console.log('User cart cleared.');
}

